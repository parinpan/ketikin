const ketikin=(e,r)=>{r=Object.assign({texts:[],speed:0,loop:!1},r),fenceSpeed=(e=>e=100-(e=(e=e>100?100:e)<0?0:e)),createCursor=(()=>{let e=document.createElement("span"),r=document.createTextNode("|");return e.id="ketikin-cursor",e.appendChild(r),e}),getCursor=(e=>e.querySelector("#ketikin-cursor")||document.createElement("cursor")),animateCursor=(e=>{getCursor(e).animate([{opacity:.5}],{duration:1e3,iterations:1/0})}),removeCursor=(e=>{getCursor(e).remove()}),addCursor=(e=>{e.appendChild(createCursor())}),addTypingChar=((e,r)=>{e.innerHTML=e.innerHTML+r,removeCursor(e)}),swapTypingText=((e,r)=>{e.innerHTML=r,removeCursor(e)}),type=((e,r,t)=>{setTimeout(()=>addTypingChar(e,r),t),setTimeout(()=>addCursor(e),t)}),backSpace=((e,r,t)=>(setTimeout(()=>swapTypingText(e,r),t),setTimeout(()=>addCursor(e),t),r.substring(0,r.length-1))),clearText=(e=>{e.innerHTML="&lrm;"}),arrangeExecutionTime=((e,t)=>e+Math.floor(Math.random()*fenceSpeed(r.speed))+t),orchestrate=((e,r,t,o)=>{clearText(e);for(const t of r)type(e,t,o),o=arrangeExecutionTime(o,5);if(t){let t=5;for(o+=1e3;r;)r=backSpace(e,r,o),o=arrangeExecutionTime(o,t),t=Math.floor(.7*t);setTimeout(()=>swapTypingText(e,r)|addCursor(e),o)}return o}),playOrchestration=((e,t)=>{let o=0,a=!1;t.forEach((n,i)=>{a=i<t.length-1&&!r.loop||r.loop,o=orchestrate(e,n,a,o)+1e3}),r.loop?setTimeout(()=>playOrchestration(e,t),o):setTimeout(()=>animateCursor(e),o)}),document.querySelectorAll(e).forEach(e=>{playOrchestration(e,(r.texts||[e.innerText]).filter(e=>e))})};